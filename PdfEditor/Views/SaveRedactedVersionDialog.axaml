<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:PdfEditor.ViewModels"
        x:Class="PdfEditor.Views.SaveRedactedVersionDialog"
        x:DataType="vm:SaveRedactedVersionDialogViewModel"
        Title="Save Redacted Version"
        Width="550"
        Height="220"
        WindowStartupLocation="CenterOwner"
        CanResize="false"
        Background="#2b2b2b"
        Foreground="#f0f0f0">

    <Design.DataContext>
        <vm:SaveRedactedVersionDialogViewModel SaveFilePath="document_REDACTED.pdf" PendingCount="3" />
    </Design.DataContext>

    <Border Padding="20">
        <StackPanel Spacing="15">

            <!-- Header -->
            <TextBlock Text="Save Redacted Version"
                       FontSize="18"
                       FontWeight="SemiBold"
                       Foreground="#f0f0f0"/>

            <Separator Background="#444" />

            <!-- Save location -->
            <StackPanel Spacing="8">
                <TextBlock Text="Save as:"
                           FontWeight="Medium"
                           Foreground="#d0d0d0"/>

                <Grid ColumnDefinitions="*,Auto">
                    <TextBox Grid.Column="0"
                             Text="{Binding SaveFilePath}"
                             Watermark="Choose location for redacted PDF"
                             Margin="0,0,8,0" />

                    <Button Grid.Column="1"
                            Content="Browse..."
                            Click="BrowseButton_Click"
                            Width="100" />
                </Grid>
            </StackPanel>

            <!-- Info section -->
            <StackPanel Spacing="8"
                        Margin="0,5,0,0">

                <!-- Redaction count -->
                <StackPanel Orientation="Horizontal"
                            Spacing="8">
                    <TextBlock Text="●"
                               Foreground="#4a9eff"
                               FontSize="14" />
                    <TextBlock Text="{Binding PendingCountText}"
                               Foreground="#d0d0d0" />
                </StackPanel>

                <!-- Original preserved notice -->
                <StackPanel Orientation="Horizontal"
                            Spacing="8">
                    <TextBlock Text="✓"
                               Foreground="#4ec9b0"
                               FontSize="14"
                               FontWeight="Bold" />
                    <TextBlock Text="Original file will be preserved"
                               Foreground="#d0d0d0" />
                </StackPanel>
            </StackPanel>

            <!-- Buttons -->
            <Grid ColumnDefinitions="*,Auto,Auto"
                  Margin="0,10,0,0">

                <Button Grid.Column="1"
                        Content="Cancel"
                        Command="{Binding CancelCommand}"
                        Width="100"
                        Margin="0,0,8,0"
                        Click="CancelButton_Click" />

                <Button Grid.Column="2"
                        Content="Save"
                        Command="{Binding SaveCommand}"
                        Width="100"
                        Classes="primary"
                        Click="SaveButton_Click" />
            </Grid>

        </StackPanel>
    </Border>

</Window>
